!!!
%div.games
  - @games.each do |game|
    %div.game
      %div.image_tag
        = image_tag game.game_image.detail.url
      %div.game_text
        %h5
          = game.name
        = game.description
%div.game_scores
  %div.game_table
    %h3
      Top Game Scores
    %tr
      - x = 0
      - while x <= @games.count
        - m = []
        - m << Match.where(game_id: x.to_s)
        - unless m.first.empty?
          - w = []
          - m.first.each do |match|
            - w << match.winner
          - winner_array = w.inject(Hash.new(0)){ |h,i| h[i] += 1; h}.max{ |a,b| a[1] <=> b[1]}
          - user_id = winner_array[0]
      %td
        = Game.find(x).name
      %td
        = User.find(user_id).name
      %td
        = (winner_array[1].to_i)*20
      %br
        - x+= 1
